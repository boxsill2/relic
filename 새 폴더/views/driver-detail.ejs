<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title><%= driver?.korean_name || driver?.full_name || 'Driver' %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/css/base.css?v=f1" />
  <link rel="stylesheet" href="/css/header-style.css?v=f1" />
  <link rel="stylesheet" href="/css/driver-style.css?v=f1" />
  <style>
    .driver-description {
      opacity: 0.9;
      line-height: 1.6;
      margin: 12px 0;
      font-size: 14px;
      white-space: pre-wrap; /* \n 줄바꿈 적용 */
    }
  </style>
</head>
<body class="theme-f1 driver-detail-page">
  <%- include('partials/header', { currentPage:'drivers' }) %>

  <main class="container">
    <section class="page-header">
      <h1 class="page-title"><%= driver?.korean_name || driver?.full_name || 'Driver' %></h1>
    </section>

    <% if (error) { %>
      <p class="page-desc" style="opacity:.85"><%= error %></p>
    <% } %>

    <% if (driver) { %>
      <section class="driver-hero">
        <div class="driver-photo driver-photo--full">
          <% if (driver.photo_src) { %>
            <img src="<%= driver.photo_src %>" alt="<%= driver.full_name %>"
                 loading="lazy" decoding="async"
                 onerror="this.remove()" />
          <% } else { %>
             <div class="avatar-fallback"><%= driver.full_name?.split(' ').map(n => n[0]).join('') %></div>
          <% } %>
        </div>

        <div>
           <h2 class="driver-name"><%= driver.korean_name || driver.full_name %></h2>
          <p class="driver-team">
            <% if (driver.team_logo) { %> <img class="team-logo" src="<%= driver.team_logo %>" alt="<%= driver.team_name %>"
                   style="width: 20px; height: 20px; vertical-align: middle; margin-right: 5px; border-radius: 4px;"
                   onerror="this.style.display='none'">
            <% } %>
            <%= driver.team_name || '팀 정보 없음' %>
            <% if (driver.number) { %> · 등번호 <strong>#<%= driver.number %></strong><% } %>
          </p>

          <% if (driver.description && driver.description !== "설명 없음") { %> <p class="driver-description"><%= driver.description %></p>
          <% } %>
        </div>
      </section>

      <% } %>
  </main>
</body>
</html>